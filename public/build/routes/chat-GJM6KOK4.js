import{a as N,b as y}from"/build/_shared/chunk-VSPKNHO5.js";import{a as h,i as g,k as u,o as i}from"/build/_shared/chunk-SIPIKYC5.js";import{a as w}from"/build/_shared/chunk-FPOB764B.js";import{a as v}from"/build/_shared/chunk-PGOH7JLP.js";import{c as t}from"/build/_shared/chunk-Q3IECNXJ.js";var b=t(v(),1);var o=t(h(),1),e=t(i(),1);function f({messages:n,username:m}){let[c,l]=(0,o.useState)(n),r=u(),d=(0,o.useRef)(null);return(0,o.useEffect)(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[c]),(0,o.useEffect)(()=>{r.data?.newMessage&&l(a=>[...a,r.data.newMessage])},[r.data]),(0,e.jsxs)("div",{className:"chat-container",children:[(0,e.jsxs)("div",{className:"chat-header",children:[(0,e.jsx)("h2",{children:"Chat Room"}),(0,e.jsxs)("span",{children:["Welcome, ",m,"!"]})]}),(0,e.jsxs)("div",{className:"messages-container",children:[c.map(a=>(0,e.jsxs)("div",{className:`message ${a.sender===m?"own-message":"other-message"}`,children:[(0,e.jsx)("div",{className:"message-sender",children:a.sender}),(0,e.jsx)("div",{className:"message-content",children:a.content}),(0,e.jsx)("div",{className:"message-time",children:new Date(a.timestamp).toLocaleTimeString()})]},a._id)),(0,e.jsx)("div",{ref:d})]}),(0,e.jsxs)(r.Form,{method:"post",className:"message-form",children:[(0,e.jsx)("input",{type:"text",name:"message",placeholder:"Type your message...",required:!0,className:"message-input"}),(0,e.jsx)("button",{type:"submit",className:"send-button",children:"Send"})]})]})}var C=t(N(),1),M=t(w(),1),k=t(y(),1);var s=t(i(),1);function p(){let n=g();return(0,s.jsxs)("div",{className:"chat-page",children:[(0,s.jsxs)("header",{className:"chat-header",children:[(0,s.jsx)("h1",{children:"Chat App"}),(0,s.jsx)("form",{action:"/logout",method:"post",children:(0,s.jsx)("button",{type:"submit",className:"logout-button",children:"Logout"})})]}),(0,s.jsx)(f,{messages:n.messages,username:n.username})]})}export{p as default};
